include:
  - filename: ex.yml
  - filename: functionVar.yml


#######################################
#               Modules               #
#######################################
modules:
  - name: spruce
    owner: evergreen-ci
    repo: spruce
    branch: main

  - name: sample
    owner: evergreen-ci
    repo: sample
    branch: main

  - name: evergreen
    owner: evergreen-ci
    repo: evergreen
    branch: main

#######################################
#              Functions              #
#######################################
# functions:
#   get-project-and-modules:
#     - command: git.get_project
#       type: setup
#       params:
#         directory: evergreen
#         token: ${github_token}
#         shallow_clone: true

#######################################
#                Tasks                #
#######################################

tasks:
  # - name: just-print
  #   commands:
  #     - command: shell.exec
  #       params:
  #         shell: "bash"
  #         script: |
  #           echo "hello world"
  - name: test-clone
    commands:
      - func: get-project-and-modules
      - command: shell.exec
        params:
          shell: "bash"
          script: |
            echo hi

#######################################
#            Buildvariants            #
#######################################
buildvariants:
  - name: ubuntu2204-small
    display_name: ubuntu2204-small
    run_on:
      - ubuntu2204-small
    tasks:
      - name: test-clone
      - name: just-print
    modules:
      - sample
      - spruce
      - evergreen
