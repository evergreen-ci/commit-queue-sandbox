patch_aliases:
  - alias: "chaya-tag-from-yaml"
    variant_tags: ["commit-queue-variant"]
    task: ".*"

pre_error_fails_task: true
pre: &pre
  - command: git.get_project
    params:
      directory: src
  - func: create virtualenv

buildvariants:
  - name: bynns single task thing
    display_name: single task test
    run_on:
      - ubuntu2004-small
    tasks:
      - name: checkrun_test

functions:
  create virtualenv:
    - command: shell.exec
      params:
        working_dir: src
        script: |
          echo "noop"
          git describe

tasks:

  - name: checkrun_test
    commands:
      - command: shell.exec
        params:
          working_dir: src
          script: |
            echo "i am become checkrun"

modules:
  - name: evergreen
    repo: git@github.com:evergreen-ci/evergreen.git
    prefix: ${workdir}/src
    branch: main
    auto_update: true

build_baron_settings:
  ticket_create_project: "EVG"
  ticket_search_projects: ["EVG"]

github_checks_aliases:
  - variant: ".*"
    task: ".*"
