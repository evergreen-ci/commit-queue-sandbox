stepback: true
exec_timeout_secs: 3600

buildvariants:
    - display_name: Task group tests
      name: ubuntu
      run_on:
          - ubuntu2204-small
      tasks:
          - name: task-group-1
          - name: task-group-2

task_groups:
    - name: task-group-1
      max_hosts: -1
      tasks:
          - task-g-a
          - task-g-b
          - task-g-c
    - name: task-group-2
      max_hosts: 1
      tasks:
          - task-g-a
          - task-g-b
          - task-g-c

tasks:
    - name: task-g-a
      commands:
          - command: shell.exec
            params:
                script: |
                  echo "task a"
    - name: task-g-b
      patch_only: true
      commands:
          - command: shell.exec
            params:
                script: |
                  echo "task b"
                  exit 1
    - name: task-g-c
      commands:
          - command: shell.exec
            params:
                script: |
                  echo "task c"