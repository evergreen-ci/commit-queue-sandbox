# To use, run `evergreen-staging patch --path module-yaml.yml`
tasks:
  - name: task1
    commands:
      - command: shell.exec
        params:
          script: |
            echo "Task1 in module-yaml.yaml new"
  - name: clone-project
    commands:
      - command: git.get_project
        params: 
          directory: src 
          revisions: 
            github-merge-queue-sandbox: ${github-merge-queue-sandbox_rev}
            shrub: ${shrub_rev}
      - command: shell.exec
        params:
          script: |
            cd src
            cd github-merge-queue-sandbox
            cat README.md
            cd ../shrub
            cat README.md

buildvariants:
  - name: variant1
    modules:
      - github-merge-queue-sandbox
      - shrub
    display_name: "Variant 1"
    tasks:
      - name: task1
      - name: clone-project
        batchtime: 3
    run_on:
      - ubuntu2204-small
  - name: variant_new
    display_name: "New_Variant"
    batchtime: 1
    tasks:
      - name: task1
        batchtime: 2
      - name: clone-project
    run_on:
      - ubuntu2204-small

modules:
- name: github-merge-queue-sandbox
  owner: evergreen-ci
  repo: github-merge-queue-sandbox
  branch: main
  auto_update: true
- name: shrub
  owner: evergreen-ci
  repo: shrub.py
  branch: zackary

include: 
  - filename: commit-queue-include-yaml.yaml
    module: github-merge-queue-sandbox
